:root{
  --bg: #f3f6fb;
  --card: #ffffff;
  --muted: #9aa4b2;
  --accent: #1e88e5;
  --danger: #e53935;
  --glass: rgba(255,255,255,0.6);
  --btn-shadow: 0 6px 14px rgba(30,30,70,0.08);
  --radius: 14px;
  --gap: 12px;
}

/* Dark theme variables will be toggled on body.dark */
body.dark{
  --bg: #0f1720;
  --card: #0b1220;
  --muted: #92a0b5;
  --accent: #60a5fa;
  --glass: rgba(255,255,255,0.03);
  color: #dbe7ff;
}

*{box-sizing:border-box}
body{
  margin:0;
  font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  background: linear-gradient(180deg,var(--bg),#eaf3ff);
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:28px;
  transition:background .3s ease;
}

.page{width:100%;max-width:420px}

.calc-card{
  background:var(--card);
  border-radius:var(--radius);
  box-shadow: 0 10px 35px rgba(10,20,40,0.08);
  padding:18px;
  transition:transform .22s ease, box-shadow .22s ease, background .2s;
  transform: translateY(0);
  overflow:hidden;
}

/* header */
.calc-header{
  display:flex;
  align-items:center;
  justify-content:space-between;
  margin-bottom:8px;
}
.calc-header h1{
  font-size:1.15rem;
  margin:0;
  letter-spacing:0.3px;
}
.controls button{
  background:transparent;
  border:0;
  cursor:pointer;
  font-size:18px;
  padding:6px;
  border-radius:8px;
}
.controls button:hover{ transform:translateY(-2px) }

/* display */
.display-wrap{
  padding:10px;
  border-radius:10px;
  background:linear-gradient(180deg,var(--glass),transparent);
  margin-bottom:14px;
}
.history{
  font-size:12px;
  color:var(--muted);
  height:18px;
  overflow:hidden;
  white-space:nowrap;
  text-overflow:ellipsis;
  transition:opacity .2s;
}
.display{
  width:100%;
  border:0;
  outline:none;
  background:transparent;
  font-size:1.8rem;
  text-align:right;
  padding:6px 4px;
  color:inherit;
}

/* grid */
.buttons-grid{
  display:grid;
  grid-template-columns:repeat(4,1fr);
  gap:12px;
  margin-bottom:14px;
}
.btn{
  background:linear-gradient(180deg,#fbfbfb,#f4f5f7);
  border:1px solid rgba(20,20,20,0.06);
  height:56px;
  border-radius:10px;
  font-size:1.05rem;
  cursor:pointer;
  box-shadow:var(--btn-shadow);
  transition:transform .12s ease, box-shadow .12s ease, background .12s;
}
.btn:active{ transform:translateY(2px) }
.btn:hover{ transform:translateY(-4px) }

.btn.op{
  background:linear-gradient(180deg,#fff8ec,#fff1dc);
}
.btn.equals{
  background: linear-gradient(180deg, var(--accent), #1765c8);
  color:white;
  grid-column:span 1;
}

/* bottom row */
.bottom-row{
  display:flex;
  gap:12px;
  align-items:center;
  justify-content:space-between;
}
.clear{
  background:var(--danger);
  color:white;
  padding:10px 18px;
  border-radius:10px;
  border:0;
  cursor:pointer;
  box-shadow: 0 8px 18px rgba(230,40,40,0.18);
}
.history-list-wrap{
  display:flex;
  align-items:center;
  gap:8px;
}
.history-toggle{
  background:transparent;
  border: 1px dashed rgba(30,30,70,0.06);
  padding:7px 10px;
  border-radius:8px;
  cursor:pointer;
}
.history-list{
  list-style:none;
  max-height:160px;
  overflow:auto;
  margin:0;
  padding:6px;
  display:none; /* toggled by JS */
}
.history-list li{
  font-size:13px;
  padding:6px;
  border-radius:6px;
  background:rgba(0,0,0,0.03);
  margin-bottom:6px;
}

/* small screens */
@media (max-width:420px){
  .calc-card{padding:12px}
  .btn{height:50px;font-size:1rem}
  .display{font-size:1.4rem}
}

/* subtle entrance */
.calc-card{animation:cardIn .45s cubic-bezier(.16,.8,.32,1)}
@keyframes cardIn{
  from{opacity:0; transform: translateY(12px) scale(.995)}
  to{opacity:1; transform: translateY(0) scale(1)}
}
